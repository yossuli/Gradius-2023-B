(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[203],{171:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/game",function(){return n(9961)}])},9961:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}});var i=n(5893),a=n(1163),r=n(7294),s=n(2237);let u=e=>e*Math.PI/180,l=(e,t)=>{let n=(t-e.createdAt)/1e3,i=300*n*Math.cos(u(e.direction)),a=300*n*Math.sin(u(e.direction)),r=e.createdPosition.x+i,s=e.createdPosition.y+a;return[r,s]},c=e=>{let{bullet:t,currentTime:n}=e,[a,r]=l(t,n);return(0,i.jsx)(s.Cd,{x:a,y:r,radius:5,fill:"red"})};var o=n(1733),d=n(1290),h=n(4420),y=n.n(h);let m=()=>{let e=(0,a.useRouter)(),t=void 0===e.query.display?null:Number(e.query.display);if(null===t){let t=()=>{let[t,n]=(0,r.useState)(0),a=async()=>{let e=await d.x.game.config.$get();null!==e&&n(e)};return(0,r.useEffect)(()=>{a()},[]),(0,i.jsx)(i.Fragment,{children:[...Array(t)].map((t,n)=>(0,i.jsx)("button",{onClick:()=>e.push({query:{display:n}}),children:"  ".concat(n,"  ")},n))})};return(0,i.jsx)(t,{})}let n=()=>{let[e,n]=(0,r.useState)([]),[a,u]=(0,r.useState)([]),[l,h]=(0,r.useState)([]),[m,x]=(0,r.useState)(Date.now()),[g]=y()(o.D.images.spaceship_png),[p]=y()(o.D.images.enemy_spaceship_png),f=async e=>{let{body:t,change:i}=await d.x.player.$get({query:{display:e}});null!==t&&!0===i&&n(t)},w=async e=>{let{body:t,change:n}=await d.x.enemy.$get({query:{display:e}});null!==t&&!0===n&&u(t)},_=async e=>{let{body:t,change:n}=await d.x.bullet.$get({query:{display:e}});null!==t&&!0===n&&h(t)};return(0,r.useEffect)(()=>{let e=requestAnimationFrame(()=>{f(t),w(t),_(t),x(Date.now())});return()=>cancelAnimationFrame(e)}),(0,i.jsxs)("div",{children:[(0,i.jsx)(i.Fragment,{children:new Date().getTime()}),(0,i.jsxs)(s.Hf,{width:1920,height:1080,children:[(0,i.jsx)(s.mh,{children:e.map(e=>(0,i.jsx)(s.Ee,{image:g,width:100,height:100,rotation:"red"===e.team?90:-90,x:e.position.x+50,y:e.position.y-50},e.id))}),(0,i.jsx)(s.mh,{children:a.map(e=>(0,i.jsx)(s.Ee,{image:p,width:50,height:50,rotation:90,x:e.createdPosition.x,y:e.createdPosition.y},e.id))}),(0,i.jsx)(s.mh,{children:l.map(e=>(0,i.jsx)(c,{bullet:e,currentTime:m},e.id))})]})]})};return(0,i.jsx)(n,{})};var x=m}},function(e){e.O(0,[289,774,888,179],function(){return e(e.s=171)}),_N_E=e.O()}]);